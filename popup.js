document.addEventListener('DOMContentLoaded', function () {const emailListElement=document.getElementById('emailList');const copyBtn=document.getElementById('copyBtn');const refreshBtn=document.getElementById('refreshBtn');const clearBtn=document.getElementById('clear-button');const openUrlsBtn=document.getElementById('open-urls-button');const closeTabsBtn=document.getElementById('close-other-tabs-button');const urlBox=document.getElementById('url-box');function loadEmails(){chrome.storage.local.get({emailsToClipboard:[]},function(result){const emails=result.emailsToClipboard||[];});}function copyEmailsToClipboard(){chrome.storage.local.get({emailsToClipboard:[]},function(result){const emails=result.emailsToClipboard||[];const text=emails.join('\n');navigator.clipboard.writeText(text).then(()=>{}).catch(err=>{console.error('Error copying emails to clipboard: ',err);});});}function downloadEmails(){chrome.storage.local.get({emailsToClipboard:[]},function(result){const emails=result.emailsToClipboard||[];const txtContent="data:text/plain;charset=utf-8,"+emails.join('\n');const encodedUri=encodeURI(txtContent);const link=document.createElement('a');link.setAttribute('href',encodedUri);link.setAttribute('download','emails.txt');document.body.appendChild(link);link.click();document.body.removeChild(link);});}function clearEmails(){chrome.runtime.sendMessage({clearEmails:true},function(){});}function openUrls(){const urls=urlBox.value.split('\n').filter(url=>url.trim()!=='');chrome.runtime.sendMessage({openUrls:urls});}function closeOtherTabs(){chrome.runtime.sendMessage({closeTabs:true});}refreshBtn.addEventListener('click',loadEmails);copyBtn.addEventListener('click',copyEmailsToClipboard);downloadBtn.addEventListener('click',downloadEmails);clearBtn.addEventListener('click',clearEmails);openUrlsBtn.addEventListener('click',openUrls);closeTabsBtn.addEventListener('click',closeOtherTabs);loadEmails();});
